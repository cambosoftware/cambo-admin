# Internationalization (i18n)

CamboAdmin supports multiple languages with RTL layout support.

## Overview

The i18n module provides:

- Multiple language support
- RTL (Right-to-Left) layout for Arabic, Hebrew, etc.
- Automatic locale detection
- User language preferences
- Translation management

## Configuration

### Enable the Module

```php
// config/cambo-admin.php
'modules' => [
    'i18n' => true,
],

'locales' => [
    'en' => ['name' => 'English', 'native' => 'English', 'rtl' => false],
    'fr' => ['name' => 'French', 'native' => 'Francais', 'rtl' => false],
    'es' => ['name' => 'Spanish', 'native' => 'Espanol', 'rtl' => false],
    'de' => ['name' => 'German', 'native' => 'Deutsch', 'rtl' => false],
    'ar' => ['name' => 'Arabic', 'native' => 'العربية', 'rtl' => true],
    'he' => ['name' => 'Hebrew', 'native' => 'עברית', 'rtl' => true],
],
```

## Translation Files

### Laravel PHP Translations

Place translation files in `lang/{locale}/`:

```
lang/
├── en/
│   ├── messages.php
│   └── validation.php
├── fr/
│   ├── messages.php
│   └── validation.php
└── es/
    ├── messages.php
    └── validation.php
```

### JSON Translations (Recommended for Vue)

```
lang/
├── en.json
├── fr.json
└── es.json
```

Example `lang/en.json`:

```json
{
  "Welcome": "Welcome",
  "Dashboard": "Dashboard",
  "Users": "Users",
  "Settings": "Settings",
  "Save": "Save",
  "Cancel": "Cancel",
  "Delete": "Delete",
  "Are you sure?": "Are you sure?",
  "Hello, :name": "Hello, :name"
}
```

## Using Translations

### In Blade

```blade
{{ __('Welcome') }}
{{ __('Hello, :name', ['name' => $user->name]) }}

@lang('messages.greeting')
```

### In PHP

```php
__('Welcome');
__('Hello, :name', ['name' => $user->name]);
trans('messages.greeting');
```

### In Vue

CamboAdmin provides a `$t` helper:

```vue
<template>
  <h1>{{ $t('Welcome') }}</h1>
  <p>{{ $t('Hello, :name', { name: user.name }) }}</p>
</template>
```

Or use the composable:

```vue
<script setup>
import { useTranslations } from '@/Composables/useTranslations'

const { t, locale, setLocale } = useTranslations()
</script>

<template>
  <h1>{{ t('Welcome') }}</h1>
</template>
```

## Locale Switching

### Backend Route

```php
// routes/web.php
Route::post('/locale/{locale}', function (string $locale) {
    if (array_key_exists($locale, config('cambo-admin.locales'))) {
        session(['locale' => $locale]);

        if (auth()->check()) {
            auth()->user()->update(['locale' => $locale]);
        }
    }

    return back();
})->name('locale.switch');
```

### Vue Locale Switcher

```vue
<template>
  <Dropdown align="right">
    <template #trigger>
      <Button variant="ghost" size="sm">
        <GlobeAltIcon class="w-5 h-5" />
        <span class="ml-2">{{ currentLocale.native }}</span>
      </Button>
    </template>

    <DropdownItem
      v-for="(locale, code) in locales"
      :key="code"
      @click="switchLocale(code)"
    >
      <span :class="{ 'font-medium': code === currentCode }">
        {{ locale.native }}
      </span>
    </DropdownItem>
  </Dropdown>
</template>

<script setup>
import { router, usePage } from '@inertiajs/vue3'

const locales = usePage().props.locales
const currentCode = usePage().props.locale
const currentLocale = locales[currentCode]

const switchLocale = (locale) => {
  router.post(route('locale.switch', { locale }))
}
</script>
```

## RTL Support

### HTML Direction

```blade
<html lang="{{ app()->getLocale() }}" dir="{{ session('direction', 'ltr') }}">
```

### Tailwind RTL Classes

Use logical properties in Tailwind:

```html
<!-- Instead of ml-4, use: -->
<div class="ms-4">...</div>

<!-- Instead of mr-4, use: -->
<div class="me-4">...</div>

<!-- Instead of pl-4, use: -->
<div class="ps-4">...</div>

<!-- Instead of text-left, use: -->
<div class="text-start">...</div>
```

### RTL-Aware Components

CamboAdmin components automatically adapt to RTL:

```vue
<Sidebar position="start" /> <!-- Left in LTR, Right in RTL -->
<Drawer position="end" />    <!-- Right in LTR, Left in RTL -->
```

## TranslationService

```php
use CamboSoftware\CamboAdmin\Services\TranslationService;

class TranslationController extends Controller
{
    public function __construct(
        protected TranslationService $translations
    ) {}

    // Get all translations for a locale
    public function index(string $locale)
    {
        return $this->translations->getTranslations($locale);
    }

    // Update a translation
    public function update(Request $request, string $locale)
    {
        $this->translations->setTranslation(
            $locale,
            $request->key,
            $request->value
        );

        return back()->with('success', 'Translation updated.');
    }
}
```

## Automatic Locale Detection

The `SetLocale` middleware detects locale from:

1. Session (if set)
2. User preference (if authenticated)
3. Browser `Accept-Language` header
4. Default app locale

## Date and Number Formatting

```vue
<script setup>
const formatDate = (date) => {
  return new Intl.DateTimeFormat(locale).format(new Date(date))
}

const formatNumber = (number) => {
  return new Intl.NumberFormat(locale).format(number)
}

const formatCurrency = (amount) => {
  return new Intl.NumberFormat(locale, {
    style: 'currency',
    currency: 'USD'
  }).format(amount)
}
</script>
```

## Best Practices

1. **Use JSON files** for frontend translations
2. **Use PHP files** for backend/validation messages
3. **Use placeholders** instead of concatenation
4. **Test RTL layouts** with actual RTL content
5. **Provide fallbacks** for missing translations
